# Road-to-Clean-Code - 4편 (주석)

## 개요

 이번 포스팅은 아래 인용문구로써 시작하겠습니다. 

> 나쁜 코드에 주석을 달지 마라. 새로 짜라. <브라이언 W.커니핸, P.J.플라우거>

지금부터 위 문구의 의미에 대해 알아보면서 주석이 깨끗한 코드를 작성하는데 필요한 것인지에 대해 알아보겠습니다.



## 깨끗한 코드에 주석이 꼭 필요할까요?

 우선, 저의 기준에서 주석을 언제 썼는 지에 대해 생각해보았습니다. 가장 많이 사용된 부분은 함수 및 변수 자체만으로 역할이 모호할 경우에 설명을 추가하기 위해서 작성했습니다.

 

 잘 생각해보면, 이는 우리가 3장까지 공부한 클린 코드에 위배됩니다. 코드는 그 자체만으로 의미를 표현할 수 있게 작성되어야 하고, 그 의미가 모호할 때는 주석을 추가하는 것이 아니라 리팩토링을 통해 의미를 표현할 수 있는 코드로 수정해야한다는 것입니다. 이렇듯 주석은 깨끗한 코드를 작성함에 있어서 필요악의 존재로 여겨집니다. 



 더 나아가서 주석은 오래될 수록 관리가 미흡해지고 이에 따라 잘못된 내용을 담는 경우도 빈번합니다. 깨끗한 코드의 경우, 의미가 명확하기 때문에 변화한다면 코드 자체로 어떤 기능을 하는지 알 수 있습니다. 하지만 나쁜 코드와 이에 달린 주석의 경우, 코드가 수정되면 유지보수를 해야하는 요소가 코드 및 주석 두 가지로 관리 point가 2개로 늘어나는 현상이 발생합니다. 이에 따라 주석의 관리가 소홀해지면 잘못된 내용이 유지되기 쉽습니다.



 즉, 우리는 개요의 첫 문구처럼 나쁜 코드는 이를 설명하는 주석을 다는 것이 아니라 리팩토링을 통해 깨끗한 코드로 변경해야만 합니다.

~~~java
// 직원에게 복지 혜택을 받을 자격이 있는지 검사한다.
if ((employee.flags & HOURLY_FLAG) && (employee.age > 65))    
~~~



 위의 코드 보다는 아래 코드가 가독성이 좋은 깨끗한 코드임을 알 수 있습니다.

~~~java
if (employee.isEligibleForFullBenefits())
~~~



 그렇다면 정말로 좋은 주석이란 없는 것일까요? 



 지금부터 좋은 주석에 대해서 알아보겠습니다.



## 좋은 주석은 없을까?

 필요악이라고 했지만 좋은 주석은 존재합니다. 먼저 법적인 주석입니다. 아래와 같이 회사가 소스 코드를 제공함으로써 첫 머리에 주석으로 들어가는 저작권 정보와 소유권 정보의 경우 필요하고 타당한 주석입니다.

~~~java
// Copyright (C) 2003,2004,2005 by Object Mentor, Inc. All rights reserved
// GNU General Public License 버전 2 이상을 따르는 조건으로 배포한다.
~~~

 

 두 번째는 의도를 설명하는 주석입니다. 코드만으로 의미를 정의하는 것은 가능하지만, 개발자가 해당 기능을 왜 만들고 어떤 의도로 사용하는지에 대해서는 파악하기 어려울 수 있습니다. 이 때에는 주석을 통해 의도를 설명할 수 있습니다.

~~~java
// 스레드를 대량 생성하는 방법으로 어떻게든 경쟁 조건을 만들려 시도한다.
for (int i = 0; i < 25000; i++) {
    
    WidgetBuilderThread widgetBuilderThread = new WidgetBuilderThread(widgetBuilder, text, parent, failFlag);
    Thread = new Thread(widgetBuilderThread);
    thread.start();
}
~~~



 세 번째는 결과를 경고하는 주석입니다. 다른 개발자들에게 해당 코드의 위험성을 알릴 때에도 주석을 활용할 수 있습니다.

~~~java
public static SimpleDateFormat makeStandardHttpDateFormat() {
    // SimpleDateFormat은 스레드에 안전하지 못하다.
    // 따라서 각 인스턴스를 독립적으로 생성해야 한다.
    SimpleDateFormat df = new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss z");
    df.setTimeZone(TimeZone.getTimeZone("GMT"));
    return df;
}
~~~



 네 번째는 TODO 주석입니다. `//TODO`주석의 경우, 앞으로 할 일을 주석으로 정의하는 것을 의미합니다. 이를 통해 프로그래머가 당장 구현하기 어려운 업무를 기술하거나 더 이상 필요없는 기능을 삭제하는 알림 등에도 활용될 수 있습니다. 단, 남용되지 않아야 하고, 주기적으로 해결이 된 코드의 경우, 해당 주석을 제거해야 합니다.



 다섯 번째는 공개 API에서 Javadocs를 의미합니다. 설명이 잘 공개된 API는 사용자에게 유용합니다. Javadocs를 잘 작성한다면 API에 대한 설명을 잘 표현할 수 있습니다. 단, 주석과 마찬가지로 잘못된 내용이 전달될 가능성이 있기 때문에 유지보수 및 내용 작성에 신경을 써야만 합니다.



 이외에도 의미를 명료하게 밝히는 주석, 정보를 제공하는 주석 등의 좋은 주석이 존재하지만, 이들은 깨끗한 코드를 작성함으로써 피할 수 있으므로 따로 강조하지 않았습니다.



 지금까지 좋은 주석에 대해 알았다면 이에 해당하지 않는 나쁜 주석에 대해서 알아보겠습니다.



## 나쁜 주석을 피하기 위해 대표적인 나쁜 주석들을 알아보자!

 대표적인 나쁜 주석 중 첫 번째는 그 자체로 의미를 알 수 없는 주석의 경우를 의미합니다. 주석의 의미를 찾기 위해 다른 코드를 찾아본다면 그 주석은 가독성이 현저히 떨어지기 때문에 나쁜 주석에 해당합니다.



 다음은 중복된 내용을 말하는 주석입니다. 코드 자체에서 그 의미를 파악할 수 있는데 같은 내용으로 달린 주석은 나쁜 주석에 해당합니다. 오히려 2번 읽게 되므로 가독성이 떨어지는 현상이 발생할 수 있습니다.



 세 번째는 오해의 여지가 있는 주석이 나쁜 주석에 해당합니다. 주석의 의미가 정확하게 일치하지 않고 다르게 해석될 수 있는 경우에는 주석만으로 코드가 정확하게 어떤 동작을 하는지 예측이 어렵습니다. 그러므로 최대한 명확한 의미를 표현할 수 있는 주석을 작성해야만 합니다.



 네 번째는 의무적으로 다는 주석을 말합니다. 모든 함수와 변수에 의무적으로 다는 주석은 가독성과 유지보수성을 저해하는 나쁜 주석입니다. 위에서 언급했듯이 주석은 없는 것이 좋습니다. 함수명, 변수명만으로도 그 의미를 파악할 수 있도록 작성하는 것이 중요합니다.



 다섯 번째는 이력을 기록하는 주석입니다. 이는 버전 관리 시스템이 있기 이전에 유효했으나, 현재는 버전 관리 시스템으로 해당 이력을 확인 가능하므로 완전하게 제거해야만 하는 나쁜 주석입니다.



 여섯 번째는 무서운 잡음입니다. 주석 같은 경우, 컴파일 에러가 발생하는 것이 아니기 때문에 신경써서 작성하지 못 하면 잡음이 발생하여 엉뚱한 주석이 작성될 위험성이 존재합니다.



 일곱 번째는 저자를 표시하는 주석으로, 이 또한 버전 관리 시스템이 나오면서 커밋한 개발자가 누군지 확인이 가능하므로 삭제해야하는 주석이 되었습니다.



 여덟 번째는 주석으로 처리한 코드도 나쁜 주석에 해당합니다. 이전 버전의 코드를 남겨 두게 되면 중요한 코드라고 생각하여 방치되는 경우가 대부분입니다. 이러한 역할은 버전 관리 시스템을 사용한다면 지속적으로 확인이 가능하므로 삭제해야 하는 요소 중 하나입니다. 



 이외에도 다양한 나쁜 주석들이 존재합니다. 이렇게 많은 나쁜 주석들이 존재함에 따라 주석을 추가하는 것은 좋은 습관은 아니라는 것을 나타낸다고 생각합니다. 그러므로 먼저 살펴본 좋은 주석이 아닌 이외의 주석은 자제하고, 코드를 리팩토링하는 것이 중요한 것을 알 수 있습니다. 



## 결론

* 나쁜 코드에 주석을 달지 마라. 새로 짜라.
* 법적인 주석, 의도를 설명하는 주석 등 좋은 주석 또한 존재합니다.
* 좋은 주석 외에는 나쁜 주석에 해당하기 때문에 이를 작성하는 것보다는 코드 리팩토링을 추천합니다.

​    

